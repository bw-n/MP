<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Premium Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- 🔍 Filtres par tag -->
  <div id="filters" style="text-align: center; margin: 1em 0;">
    <button data-tag="XR">XR</button>
    <button data-tag="Dev">Développement</button>
    <button data-tag="musique">Musique</button>
    <button data-tag="all">Tout afficher</button>
  </div>

  <!-- 🧱 Grille premium -->
  <div id="grid" class="grid"></div>

  <!-- 🌐 Script principal -->
  <script src="map.js"></script>

  <!-- 📏 Ajustement de la hauteur dans l'iframe -->
  <script>
    function sendHeight() {
      const grid = document.getElementById('grid');
      const filters = document.getElementById('filters');
      const buffer = 60; // marge de sécurité
      const height = filters.offsetHeight + grid.offsetHeight + buffer;
      parent.postMessage({ type: 'setHeight', height }, '*');
    }

    window.addEventListener('load', () => {
      sendHeight();
      setTimeout(sendHeight, 500);
      setTimeout(sendHeight, 1500);
      setTimeout(sendHeight, 3000);
    });

    new ResizeObserver(sendHeight).observe(document.body);
  </script>

</body>
</html>
